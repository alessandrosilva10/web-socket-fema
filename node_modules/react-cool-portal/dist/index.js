"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-dom");function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t}),[t]),n},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=setTimeout((function(){clearTimeout(n),e()}),t)},c=function(r,o,c,i){return function(a){var l=a.children,f=n(e.useState(null),2),d=f[0],s=f[1];return e.useEffect((function(){return o?(s(document.getElementById(r)||function(e){var t=document.createElement("div");return t.setAttribute("id",e),document.body.appendChild(t),t}(r)),function(){d&&u((function(){""===d.innerHTML&&d.remove()}))}):function(){return null}}),[d]),e.useEffect((function(){if(!o||!d)return function(){return null};var e=function(e){d.contains(e.target)||c(e)},t=function(e){27===e.keyCode&&i(e)};return c&&document.addEventListener("click",e),i&&document.addEventListener("keydown",t),function(){c&&document.removeEventListener("click",e),i&&document.removeEventListener("keydown",t)}}),[d]),o&&d&&t.createPortal(l,d)}};exports.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.containerId,i=void 0===r?"react-cool-portal":r,a=t.defaultShow,l=void 0===a||a,f=t.clickOutsideToHide,d=void 0===f||f,s=t.escToHide,v=void 0===s||s,m=t.internalShowHide,y=void 0===m||m,b=t.onShow,h=t.onHide,p=e.useState(l),S=n(p,2),g=S[0],k=S[1],w=e.useRef(!1),C=o(b),E=o(h),A=e.useRef(l),I=e.useCallback((function(){d&&(w.current=!0,u((function(){w.current=!1})))}),[d]),T=e.useCallback((function(e){I(),A.current||(k(!0),A.current=!0,C.current&&C.current(e))}),[I]),j=e.useCallback((function(e){I(),A.current&&(k(!1),A.current=!1,E.current&&E.current(e))}),[I]),x=e.useCallback((function(e){A.current?j(e):T(e)}),[j,T]),H=e.useCallback((function(e){w.current||j(e)}),[j]),L=e.useCallback(c(i,!y||g,d&&H,v&&H),[y&&g]);return{Portal:L,isShow:g,show:T,hide:j,toggle:x}},exports.defaultContainerId="react-cool-portal",exports.initShow=!0;
